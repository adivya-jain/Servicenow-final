<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function($scope) {
  var c = this;
  c.venue = {};

  c.submitVenue = function() {
    c.success = '';
    c.error = '';

    if (!c.venue.x_venue_name || !c.venue.x_location || !c.venue.x_capacity || !c.venue.x_event || !c.venue.x_contact_person || !c.venue.x_contact_number) {
      c.error = 'All fields are required.';
      return;
    }

    c.server.get({ venue: c.venue }).then(function(response) {
      if (response.data.success) {
        c.success = response.data.success;
        c.venue = {};
      } else {
        c.error = response.data.error || 'Error submitting venue.';
      }
    });
  };
};
]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>emp_event_venue_widget</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>EMP Event Venue - Widget</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  data.success = '';
  data.error = '';

  if (input && input.venue) {
    var v = input.venue;

    if (v.x_venue_name && v.x_location && v.x_capacity && v.x_event) {
      // Validate Event ID
      var eventGR = new GlideRecord('x_1801001_event_ma_event'); // Replace with your event table name
      if (eventGR.get(v.x_event)) {
        var gr = new GlideRecord('x_1801001_event_ma_venue');
        gr.initialize();
        gr.setValue('x_venue_name', v.x_venue_name);
        gr.setValue('x_location', v.x_location);
        gr.setValue('x_capacity', v.x_capacity);
        gr.setValue('x_event', eventGR.getUniqueValue());
        gr.setValue('x_contact_person', v.x_contact_person);
        gr.setValue('x_contact_number', v.x_contact_number);
        gr.insert();
        data.success = 'Venue booking request submitted successfully.';
      } else {
        data.error = 'Invalid Event ID.';
      }
    } else {
      data.error = 'All fields are required.';
    }
  }
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-08-05 18:26:01</sys_created_on>
        <sys_id>b3c6acfb93cfa610ca45fcf08bba1013</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>EMP Event Venue - Widget</sys_name>
        <sys_package display_value="Event Management &amp;amp; Planning System" source="x_1801001_event_ma">0a4cbcdb938b2610ca45fcf08bba1091</sys_package>
        <sys_policy/>
        <sys_scope display_value="Event Management &amp;amp; Planning System">0a4cbcdb938b2610ca45fcf08bba1091</sys_scope>
        <sys_update_name>sp_widget_b3c6acfb93cfa610ca45fcf08bba1013</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-08-05 18:26:01</sys_updated_on>
        <template><![CDATA[<div class="container mt-4">
  <h3 class="mb-4">Venue Booking Request</h3>

  <div class="form-group">
    <label>Venue Name</label>
    <input class="form-control" type="text" ng-model="c.venue.x_venue_name">
  </div>

  <div class="form-group">
    <label>Location</label>
    <input class="form-control" type="text" ng-model="c.venue.x_location">
  </div>

  <div class="form-group">
    <label>Capacity</label>
    <input class="form-control" type="number" ng-model="c.venue.x_capacity">
  </div>

  <div class="form-group">
    <label>Event ID</label>
    <input class="form-control" type="text" ng-model="c.venue.x_event">
  </div>
  
  <div class="form-group">
    <label>Contact Person</label>
    <input class="form-control" type="text" ng-model="c.venue.x_contact_person">
  </div>
  
  <div class="form-group">
    <label>Contact Number</label>
    <input class="form-control" type="text" ng-model="c.venue.x_contact_number">
  </div>

  <button class="btn btn-primary mt-3" ng-click="c.submitVenue()">Submit Request</button>

  <div class="alert alert-success mt-3" ng-if="c.success">
    {{ c.success }}
  </div>
  <div class="alert alert-danger mt-3" ng-if="c.error">
    {{ c.error }}
  </div>
</div>
]]></template>
    </sp_widget>
</record_update>
